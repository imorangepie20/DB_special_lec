# 초롱대학교 데이터베이스 특강

## 제 2강: ERD 모델링과 테이블 설계 (관계형 데이터베이스의 핵심)

지난 1강 마지막에 생각할 거리를 하나 드렸습니다. **"학생이 특정 교수님의 수업을 듣는다"**는 조건이 추가된다면 어떤 개체(Entity)가 필요할까요?

정답은 **'수업(또는 과목)'**이라는 새로운 개체입니다. 그리고 이 강의에서는 이 개체들이 실제로 데이터베이스 안에서 어떻게 **'테이블(Table)'**로 변환되는지를 다룹니다.

---

### 1. N:M (다대다) 관계와 매핑 테이블(Mapping Table)

학생과 수업의 관계를 생각해 봅시다.
* 하나의 **[학생]**은 여러 개의 **[수업]**을 들을 수 있습니다. (1 : N)
* 하나의 **[수업]**은 여러 명의 **[학생]**이 수강할 수 있습니다. (1 : N)

이처럼 양쪽 모두가 1:N 관계를 가질 때, 이를 **N:M (다대다) 관계**라고 부릅니다.
관계형 데이터베이스에서는 이 N:M 관계를 테이블로 직접 표현할 수 없습니다. 따라서 이 둘을 연결해주는 **'연결 고리(매핑 테이블)'**가 반드시 필요합니다.

이를 **[수강(Enrollment)]**이라는 새로운 개체(또는 행위 개체)로 풀어낼 수 있습니다.
* **수강(Enrollment) 속성:** 수강번호, 학번(FK), 수업코드(FK), 수강년도, 학기, 성적

### 2. ERD (Entity Relationship Diagram) 그리기

우리가 찾은 속성들을 시각화하여 도면으로 그리는 과정입니다. (실무에서는 ERWin, Draw.io 같은 툴을 많이 사용합니다.)

각 네모 상자(개체) 안에 속성들을 나열하고, 개체들 사이에 선을 그어 1:N, N:M 등의 관계를 표시합니다. 

### 3. 테이블(Table) 설계 및 핵심 키(Key) 개념

ERD가 완성되면, 이를 데이터베이스에 넣기 위한 **'테이블(표)'** 형태로 바꿉니다. 이때 가장 중요한 두 가지 개념이 있습니다.

1. **기본키 (Primary Key, PK):** 
   * 테이블의 각 줄(행/Row)을 유일하게 식별할 수 있는 핵심 값입니다.
   * 예) 학생 테이블의 **`학번`**, 교수 테이블의 **`교번`**, 학과 테이블의 **`학과코드`**
   * 조건: 절대로 중복될 수 없고, 비어있어서도(NULL) 안 됩니다.

2. **외래키 (Foreign Key, FK):**
   * 다른 테이블의 개체와 연결(관계)을 맺기 위해 사용하는 값입니다. 다른 테이블의 '기본키'를 빌려와서 씁니다.
   * 예) 학생 테이블에 있는 **`소속학과코드`**는 학과 테이블의 `학과코드`(단일값)를 가리키는 외래키입니다. 이를 통해 이 학생이 어느 학과인지 추적할 수 있습니다.

### 4. 실제 테이블 구조 예시 (초롱대학교)

**[학생 테이블] (Student)**
| **학번 (PK)** | 이름 | 학년 | 입학년도 | 소속학과코드 (FK) | 지도교수_교번 (FK) |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **20230001** | 김초롱 | 2 | 2023 | CS01 | P1001 |
| **20240055** | 이데이터 | 1 | 2024 | EE02 | P1553 |

**[학과 테이블] (Department)**
| **학과코드 (PK)** | 학과이름 | 소속학부코드 (FK) |
| :--- | :--- | :--- |
| **CS01** | 컴퓨터공학과 | ENG01 |
| **EE02** | 전자공학과 | ENG01 |

---

### 📝 요약 및 과제

2강에서는 N:M 관계를 해결하는 방법(매핑 테이블)을 알아보고, 정보들을 실제 데이터베이스에 담기 위해 **테이블과 PK, FK** 개념을 통해 뼈대를 설계하는 과정을 배웠습니다.

이제 초롱대학교의 기초 뼈대가 완성되었습니다!

**🗣 생각해 볼 문제:** 
학생 테이블에 학생의 '집 주소'를 넣으려 합니다. 그런데 학생이 이사를 가서 주소가 바뀌었습니다. 예전 주소 이력도 모두 남기고 싶다면, 현재의 [학생 테이블]에 주소 칸을 여러 개 만드는 것이 좋을까요? 어떻게 해결하는 것이 데이터베이스 관점에서 올바른 설계일까요?

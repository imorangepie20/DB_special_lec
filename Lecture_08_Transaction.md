# 초롱대학교 데이터베이스 특강

## 제 8강: 데이터의 안전지킴이, 트랜잭션 (Transaction)과 마무리

7강 마지막에 드렸던 무시무시한 동시 접속 오류와 반쪽짜리 데이터 처리(예: 내 통장에 100만 원은 출금됐는데, 친구 통장에는 100만 원이 입금되지 않고 서버가 뻗어버린 상황)를 데이터베이스가 시스템적으로 막아내는 안전장치!

그 위대한 개념의 이름은 바로 **트랜잭션 (Transaction)** 입니다.
이번 8강을 마지막으로 초롱대학교 데이터베이스 특강의 핵심 여정을 마무리하겠습니다.

---

### 1. 트랜잭션(Transaction) 이란?

트랜잭션은 데이터베이스의 상태를 변화시키는 **'작업의 최소 논리적 단위'**를 말합니다. 쉽게 말해 **"전부 다 완벽하게 처리되거나(All), 아예 처음부터 없던 일로 하거나(Nothing)"**를 보장해주는 마법의 상자입니다.

**[초롱 학생의 수강신청 과정 예시]**
1. 남은 정원이 1명인지 조회한다. (성공)
2. 수강 인원을 0명으로 (정원 마감) 감소시킨다. (성공)
3. 김초롱 학생의 수강이력 테이블에 과목 정보를 추가한다. (성공)

이 **3개의 작업은 뗄래야 뗄 수 없는 하나의 '트랜잭션' 세트**입니다. 만약 2번까지만 성공하고 3번에서 컴퓨터 전원이 나갔다면? 트랜잭션 시스템은 재빨리 1번과 2번 작업을 원래 상태(정원 1명 남음)로 되돌려버립니다.

### 2. 트랜잭션을 조종하는 두 가지 주문 (TCL: Transaction Control Language)

데이터베이스에게 "내 작업이 이 상자들의 끝맺음을 어떻게 할지" 알려주는 명령어입니다.

* **`COMMIT` (커밋 - "도장 꽝!"):**
  트랜잭션으로 묶인 모든 작업이 에러 없이 완벽하게 끝났을 때 사용합니다.
  "방금 한 데이터베이스 변경 사항들을 이제 영구적으로 디스크에 저장(적용)하고 확정 지어라!" 라는 의미입니다.
* **`ROLLBACK` (롤백 - "타임머신 탑승!"):**
  작업 도중 단 한 개라도 오류가 발생했을 때 사용합니다.
  "무언가 잘못되었다! 방금 했던 일련의 작업들을 모두 취소하고 가장 최근에 커밋했던 안전한 원상태로 되돌려라!" 라는 의미입니다.

*(참고로 우리가 5강에서 배웠던 `INSERT`, `UPDATE`, `DELETE` 명령어를 치고 나서, 최종적으로 이 `COMMIT`을 날려주지 않으면 나만 보이고 남들(다른 접속자) 화면에는 반영되지 않습니다.)*

### 3. 트랜잭션의 4가지 맹세 (ACID 원칙)

데이터베이스가 트랜잭션을 안전하게 처리하기 위해 굳게 지키는 4가지 성질입니다. (이론 시험에 꼭 나옵니다!)

1. **A (Atomicity - 원자성):** All or Nothing. 아예 다 하거나, 단 하나라도 실패하면 전부 취소되어야 한다.
2. **C (Consistency - 일관성):** 트랜잭션이 성공하면 데이터베이스는 언제나 모순 없는 올바른 상태를 유지해야 한다. (예: 마이너스 학년 같은 데이터가 생기면 안 됨)
3. **I (Isolation - 고립성):** 김초롱 학생과 이데이터 학생이 동시에 접근해도, 각자의 수강신청 트랜잭션은 서로 끼어들거나 방해할 수 없고 독립적이어야 한다.
4. **D (Durability - 영속성):** 한 번 `COMMIT` 도장을 찍고 나면, 1초 뒤에 시스템이 폭발해도 그 데이터는 영원히 안전하게 저장되어 있어야 한다.

---

### 🎉 초롱대학교 데이터베이스 특강을 마치며

정말 고생 많으셨습니다! 우리는 가상의 **[초롱대학교]** 시스템 구축을 통해 데이터베이스의 핵심 세계관 전체를 관통하며 달려왔습니다.

1. **[1강~2강: 설계]** 개체와 관계를 찾고(ERD) 뼈대(테이블)를 디자인하는 방법
2. **[3강: 정규화]** 이상 현상을 막기 위해 똑똑하게 데이터를 쪼개는 기술 (정규화)
3. **[4강: DDL]** 설계도를 진짜 빈 테이블(건물)로 생성해내는 명령어 (`CREATE TABLE`)
4. **[5강: DML]** 입주자(데이터)를 넣고, 빼고, 수정하는 기본기 (`CRUD`)
5. **[6강~7강: 조인과 그룹]** 흩어진 데이터를 찰금 붙이고(`JOIN`), 묶어서 통계를 내는 기법 (`GROUP BY`)
6. **[8강: 트랜잭션]** 완성된 나의 소중한 데이터를 외부의 재앙과 동시접속 오류로부터 지켜내는 궁극의 방패 (`Transaction / ACID`)

비록 가상의 예시였지만, 이 8개의 큰 산맥을 넘으셨다면 여러분은 이미 어느 기업 실무에 가셔도 **'데이터베이스의 구조적 사고'**를 충분히 갖춘 상태라고 자신하셔도 좋습니다.

앞으로 언제든 실전 코딩이나 개발 중 데이터베이스가 막막해지면 창의적으로 개체(Entity)를 쪼개고 무적의 `JOIN`과 `트랜잭션`을 꺼내 드시길 바랍니다.
수고하셨습니다!

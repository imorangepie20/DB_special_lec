# 초롱대학교 데이터베이스 특강

## 제 3강: 정규화 (Normalization) - 좋은 테이블의 조건

지난 2강에 드렸던 생각할 거리부터 살펴보겠습니다. **"학생의 과거 주소 이력을 모두 남기고 싶다면 어떻게 해야 할까?"** 

만약 [학생 테이블]에 주소1, 주소2, 주소3... 속성(컬럼)을 무한정 늘린다면 빈칸(NULL)이 너무 많아져 공간이 낭비되고, 관리가 힘들어집니다. 
데이터베이스에서는 이럴 때 **[학생 주소 이력]**이라는 새로운 테이블을 하나 더 만들어 분리하는 것이 정석입니다.
* 예: **[학생 주소 이력] 테이블** (일련번호(PK), 학번(FK), 주소, 거주방식(기숙사/자취 등), 전입일자, 전출일자)

이처럼 테이블을 쪼개서 구조를 깔끔하고 효율적으로 만드는 과정을 바로 **정규화(Normalization)**라고 부릅니다.

---

### 1. 정규화(Normalization)란 무엇인가?

정규화는 데이터베이스 설계에서 **중복을 최소화**하고, 데이터를 조작(삽입, 삭제, 수정)할 때 발생할 수 있는 **이상 현상(Anomaly)**을 방지하기 위해 덩치가 큰 테이블을 여러 개의 작은 테이블로 쪼개는 (분해하는) 과정입니다.

초롱대학교 시스템에 6,000명의 학생 데이터가 있고 수백 명의 교수 데이터, 수많은 수강 데이터가 있을 때, 정규화가 제대로 되지 않으면 엄청난 혼란이 발생합니다.

### 2. 이상 현상 (Anomaly) - 왜 정규화를 해야 할까?

하나의 큰 테이블에 모든 정보를 모아두었다고 가정해 봅시다. (학생 테이블에 학과 이름, 학과 사무실 위치까지 모두 적어둔 경우)

1. **삽입 이상 (Insertion Anomaly):**
   * 새로운 **'데이터사이언스학과'**가 신설되었습니다. 아직 신입생이 한 명도 없습니다. 
   * 학생 정보가 없이는 저 테이블에 학과 정보만 따로 넣을 수 없습니다. (학번이 PK라서 비워둘 수 없기 때문)
2. **수정/갱신 이상 (Update Anomaly):**
   * '컴퓨터공학과' 사무실이 3공학관에서 5공학관으로 이사했습니다.
   * 컴퓨터공학과 소속 학생 300명의 데이터를 일일이 찾아서 모두 수정해주어야 합니다. 만약 한 명이라도 빼먹으면 데이터 불일치가 발생합니다.
3. **삭제 이상 (Deletion Anomaly):**
   * '국어국문학과'에 학생이 1명뿐인데, 이 학생이 자퇴했습니다. 
   * 이 학생 정보를 삭제했더니, 그 줄에 같이 있던 '국어국문학과'라는 학과의 존재 자체(사무실 위치 등)가 데이터베이스에서 아예 날아가 버립니다.

### 3. 정규화 단계 (제 1정규화 ~ 제 3정규화)

정규화는 단계별로 기준표가 존재합니다. 현업에서는 주로 '제 3정규형'까지만 맞추어도 훌륭한 설계로 봅니다.

* **제 1정규화 (1NF):** 
  모든 칸(속성값)에는 **'하나의 값(원자값)'**만 들어가야 합니다. 
  (예: 취미 칸에 '독서, 수영, 영화감상' 이렇게 콤마(,)로 여러 개를 적어두면 안 됩니다.)
* **제 2정규화 (2NF):**
  기본키가 2개 이상으로 합쳐진(복합키) 경우, 일부 키에만 의존하는 데이터가 있다면 따로 테이블을 빼냅니다. (부분 함수 종속성 제거)
* **제 3정규화 (3NF):** 
  기본키가 아닌 일반 속성들끼리 서로 꼬리를 물고 의존(종속)하는 경우를 잘라냅니다. 
  (예: 학생 테이블에 '학번(PK)'이 있고, 일반 속성으로 '소속학과코드', '학과사무실위치'가 있는데, 사실 사무실 위치는 소속학과코드에 의해서만 결정되므로 **[학과 테이블]**로 분리하여 빼냅니다. - *2강에서 우리가 이미 했던 작업입니다!*)

### 4. 역정규화 (Bypass / Denormalization) - 예외의 상황

열심히 테이블을 여러 개로 잘게 쪼개두면(정규화) 관리가 안전합니다. 하지만 여러 폴더(테이블)에 흩어진 자료를 매번 하나로 모아서(Join) 보려면 조회 속도가 느려질 수 있습니다.

조회 성능이 극단적으로 중요할 때는, 일부 중복을 감수하고서라도 쪼개진 테이블을 다시 하나로 합치거나 요약 테이블을 따로 만드는 등 의도적으로 정규화 규칙을 깨는 것을 **역정규화**라고 합니다.

---

### 📝 요약 및 과제

자! 우리는 중복을 줄이고 에러를 방지하기 위해 둔탁한 테이블을 쪼개고 나누는 **정규화(Normalization)** 개념을 다뤘습니다.

**🗣 생각해 볼 문제:** 
이제 초롱대학교의 데이터베이스 뼈대와 테이블 설계 기준까지 갖춰졌습니다.
설계도(ERD)가 완성되었다면, 이제 이 도면을 컴퓨터(DBMS 시스템: MySQL, Oracle 등)가 알아듣고 실제로 빈 테이블을 생성하도록 **명령어**를 내려야 합니다.

데이터베이스와 대화하는 이 **표준 언어의 이름**은 무엇일까요? 그리고 테이블을 새로 생성할 때 쓰는 **명령어**는 무엇일까요?

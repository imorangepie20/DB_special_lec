# 초롱대학교 데이터베이스 특강

## 제 6강: 흩어진 퍼즐 맞추기, 조인 (JOIN)

5강 마지막 퀴즈의 정답을 공개합니다! 쪼개진 두 테이블(학생 이름 + 학과 이름)에서 필요한 정보만 합쳐서 한 번에 조회하는 마법 같은 기술의 이름은 바로 **`JOIN`** 입니다.

관계형 데이터베이스(RDBMS)의 '관계(Relational)'가 빛을 발하는 순간이자, 실무 SQL 작성에서 가장 핵심적인 부분입니다.

---

### 1. JOIN (조인) 이란?

우리는 3강 정규화(Normalization) 시간에 데이터를 깔끔하게 관리하기 위해 거대한 테이블을 **[학생]** 테이블과 **[학과]** 테이블로 쪼갰습니다. 이 덕분에 정보 수정과 삭제 시 발생하는 문제(이상 현상)를 방지할 수 있었죠.

하지만! 교수님이 원하셨던 것처럼 **"학생 김초롱의 학과 코드가 아니라, 진짜 학과 이름(컴퓨터공학과)을 같이 보여줘!"** 라고 한다면 어떻게 해야 할까요?

이때 두 테이블에 공통적으로 존재하는 **연결 고리(외래키, FK)**를 매개체로 삼아, 두 테이블을 일시적으로 찰싹 붙여서(결합시켜서) 보여주는 것이 바로 JOIN입니다.

### 2. JOIN의 종류와 기본 문법

가장 대표적으로 쓰이는 JOIN 세 가지를 살펴보겠습니다.

#### ① INNER JOIN (내부 조인) - 가장 만만하고 흔한 녀석!
두 테이블 모두에 데이터가 존재하는 '교집합'만 가져옵니다. 

**실습: 학생 이름과 그 학생이 속한 학과명 함께 조회하기**
```sql
SELECT 
    S.student_name,         -- 학생 테이블의 이름
    S.grade,                -- 학생 테이블의 학년
    D.department_name       -- 학과 테이블의 학과이름
FROM Student S              -- Student 테이블을 S라고 짧게 부름 (별칭, Alias)
INNER JOIN Department D     -- Department 테이블(D)을 갖다 붙인다!
   ON S.department_code = D.department_code;  -- 연결 고리: 학생의 소속학과코드와 학과의 학과코드가 같은 것끼리!
```
* **결과:** 학과가 배정된 학생들만, 본인의 학과 이름과 함께 나옵니다.

#### ② LEFT OUTER JOIN (왼쪽 외부 조인) - "왼쪽 기준, 다 모여!"
왼쪽(먼저 적은) 테이블의 내용은 어떤 일이 있어도 모두 보여줍니다. 오른쪽 테이블에 매칭되는 데이터가 없으면 비워둔 채(NULL)로 보여줍니다.

**실습: 학교에 신설된 지 얼마 안 돼서 아직 학생이 단 한 명도 없는 껍데기 학과까지 다 포함해서, 모든 학과의 학생 리스트 조회하기**
**(이번엔 Department 테이블을 왼쪽에 두겠습니다.)**
```sql
SELECT 
    D.department_name, 
    S.student_name
FROM Department D           -- 왼쪽 기준! (학과 정보는 무조건 다 나와야 해)
LEFT JOIN Student S         -- 오른쪽은 학생 테이블
   ON D.department_code = S.department_code;
```
* **결과:** '데이터사이언스학과'처럼 소속 학생이 없는 학과도 리스트에 출력되며, 옆의 학생 이름 칸은 빈칸(NULL)으로 표시됩니다.

#### ③ CROSS JOIN (상호 조인) - "모든 경우의 수 다 곱해!"
조건(`ON`) 없이 왼쪽 테이블의 모든 행과 오른쪽 테이블의 모든 행을 무작위로 결합합니다. (Cartesian Product)
* 학생 6,000명 × 학과 18개 = 108,000줄의 의미 없는 뻥튀기 결과가 나옵니다. 실무에서는 아주 특수한 경우의 더미 데이터 생성 시에만 쓰며 평소에는 쳐다보지도 않는 녀석입니다.

### 3. JOIN을 이해하는 핵심 키워드: ON 과 별칭(Alias)

1. **`ON` 연산자:** JOIN을 할 때는 무작정 붙이는 게 아니라 **"어떤 기준으로 자석처럼 서로 붙일지"**를 반드시 `ON` 뒤에 적어주어야 합니다. (주로 `PK = FK` 형태가 됩니다.)
2. **별칭 (Alias):** 
   `Student.department_code = Department.department_code` 라고 길게 쓰면 손가락이 아픕니다. 그래서 `FROM Student S` 처럼 `S`나 `D`라는 짧은 별명(또는 AS 키워드)을 붙여 씁니다.

---

### 📝 요약 및 과제

6강에서는 데이터베이스 실력의 척도라고 할 수 있는 **JOIN**에 대해 배웠습니다. 
* 확실하게 연결된 짝꿍끼리만 보는 **INNER JOIN**
* 매칭되는 짝궁이 없어도 기준이 되는 쪽은 끝까지 다 데려가는 **LEFT (또는 RIGHT) OUTER JOIN**

이 두 가지만 완벽하게 다룰 줄 알아도 실무 관계형 데이터베이스의 절반은 정복한 셈입니다!

**🗣 생각해 볼 문제 (다음 강의 예고):** 
초롱대학교의 교수님께서 또 한 번 지시를 내리셨습니다.
*"학생 명부는 잘 받았네. 이번엔 **우리 대학 각 학과별로 소속된 학생 수가 총 몇 명인지 통계**를 내서 엑셀표처럼 한눈에 보게 요약해 주게나."*

이처럼 개별 학생들의 데이터 6,000개를 하나하나 훑어보는 것이 아니라, '학과별'로 묶어서(그룹핑해서) '학생 수(통계)'를 세어주는 그룹화와 집계 함수 기술이 필요합니다. 

데이터를 묶을 때 사용하는 **특별한 구문(키워드)**은 무엇일까요?
